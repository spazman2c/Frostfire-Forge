let keyMap={0:"X",1:"Circle",2:"Square",3:"Triangle",4:"Left bumper",5:"Right bumper",6:"Left trigger",7:"Right trigger",8:"Share",9:"Options",10:"Left stick",11:"Right stick",12:"Up",13:"Down",14:"Left",15:"Right",16:"Home",17:"Touchpad"},previousIndexes=[],controllerInputLoop=()=>{let n=navigator.getGamepads()[0]||null;if(n){var a,a=(0<(a=n.buttons.map(e=>e.pressed).map((e,t)=>e?t:-1).filter(e=>-1!==e)).length?(i=new CustomEvent("gamepadkeydown",{detail:{indexes:a,names:a.map(e=>keyMap[e]),sensitivities:a.map(e=>n.buttons[e].value)}}),previousIndexes=a,window.dispatchEvent(i)):0===a.length&&0<previousIndexes.length&&(i=new CustomEvent("gamepadkeyup",{detail:{index:previousIndexes[0],name:keyMap[previousIndexes[0]]}}),previousIndexes=[],window.dispatchEvent(i)),n.axes),i=.01;let e=Math.abs(a[0])>i?a[0]:0,t=Math.abs(a[1])>i?a[1]:0;if(0!==e||0!==t){var s=new CustomEvent("gamepadjoystick",{detail:{x:e,y:t,type:"left"}});window.dispatchEvent(s)}else if(2<a.length){let e=Math.abs(a[2])>i?a[2]:0,t=Math.abs(a[3])>i?a[3]:0;0===e&&0===t||(s=new CustomEvent("gamepadjoystick",{detail:{x:e,y:t,type:"right"}}),window.dispatchEvent(s))}}window.requestAnimationFrame(controllerInputLoop)};controllerInputLoop();